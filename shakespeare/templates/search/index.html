<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip="">
  
  <py:def function="page_title">Search Material</py:def>

  <div py:match="content">
    <h2>Search Available Material</h2>
    <form name="test" method="GET" action="">
      <input type="text" name="query" value="${c.query}" />
      <input type="submit" name="submit" value="Submit" />
    </form>

    <div class="search-results" py:if="c.query">
      <h3>Search Results: ${c.total} matches found</h3>

      ${c.page.pager(query=c.query)}  

      <ul>
        <li py:for="m in c.results">
        <!-- TODO: do we need this if guard? All search results should have a
        'real' text attribute ... -->
        <py:if test="m.text">${h.link_to(m.text.title, url(controller='text',
        action='view', id=m.text.name))}
        </py:if>
        Line: ${m.lineno}
        <blockquote>
          <pre>${m.snippet}</pre>
        </blockquote>
        </li>
      </ul>

      ${c.page.pager(query=c.query)}
    </div>
  </div>

  <xi:include href="../layout.html" />
</html>
